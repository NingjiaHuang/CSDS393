function cov_1iq474yc6v(){var path="/Users/ningjia/Desktop/CSDS393/server/components/authentication_breeder.js";var hash="cfb37cdf9f2e7bd4c7713faacf5a2fcd86118ac5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/ningjia/Desktop/CSDS393/server/components/authentication_breeder.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:42}},"1":{start:{line:2,column:11},end:{line:2,column:42}},"2":{start:{line:3,column:15},end:{line:3,column:32}},"3":{start:{line:4,column:21},end:{line:4,column:53}},"4":{start:{line:5,column:17},end:{line:5,column:30}},"5":{start:{line:6,column:18},end:{line:6,column:52}},"6":{start:{line:7,column:22},end:{line:7,column:60}},"7":{start:{line:10,column:0},end:{line:34,column:3}},"8":{start:{line:12,column:114},end:{line:12,column:122}},"9":{start:{line:13,column:4},end:{line:33,column:5}},"10":{start:{line:15,column:21},end:{line:15,column:94}},"11":{start:{line:16,column:8},end:{line:18,column:9}},"12":{start:{line:17,column:12},end:{line:17,column:63}},"13":{start:{line:19,column:22},end:{line:19,column:26}},"14":{start:{line:21,column:26},end:{line:21,column:28}},"15":{start:{line:22,column:21},end:{line:22,column:52}},"16":{start:{line:23,column:31},end:{line:23,column:64}},"17":{start:{line:25,column:8},end:{line:26,column:156}},"18":{start:{line:28,column:22},end:{line:28,column:61}},"19":{start:{line:29,column:8},end:{line:29,column:26}},"20":{start:{line:31,column:8},end:{line:31,column:35}},"21":{start:{line:32,column:8},end:{line:32,column:46}},"22":{start:{line:36,column:0},end:{line:60,column:3}},"23":{start:{line:38,column:84},end:{line:38,column:92}},"24":{start:{line:39,column:4},end:{line:59,column:5}},"25":{start:{line:41,column:21},end:{line:41,column:94}},"26":{start:{line:42,column:8},end:{line:44,column:9}},"27":{start:{line:43,column:12},end:{line:43,column:63}},"28":{start:{line:45,column:22},end:{line:45,column:26}},"29":{start:{line:47,column:26},end:{line:47,column:28}},"30":{start:{line:48,column:21},end:{line:48,column:52}},"31":{start:{line:49,column:31},end:{line:49,column:64}},"32":{start:{line:51,column:8},end:{line:52,column:99}},"33":{start:{line:54,column:22},end:{line:54,column:61}},"34":{start:{line:55,column:8},end:{line:55,column:26}},"35":{start:{line:57,column:8},end:{line:57,column:35}},"36":{start:{line:58,column:8},end:{line:58,column:46}},"37":{start:{line:62,column:0},end:{line:87,column:3}},"38":{start:{line:64,column:68},end:{line:64,column:76}},"39":{start:{line:65,column:4},end:{line:86,column:5}},"40":{start:{line:67,column:21},end:{line:67,column:93}},"41":{start:{line:68,column:8},end:{line:71,column:9}},"42":{start:{line:69,column:12},end:{line:69,column:37}},"43":{start:{line:70,column:12},end:{line:70,column:63}},"44":{start:{line:72,column:22},end:{line:72,column:26}},"45":{start:{line:74,column:26},end:{line:74,column:28}},"46":{start:{line:75,column:21},end:{line:75,column:52}},"47":{start:{line:76,column:31},end:{line:76,column:64}},"48":{start:{line:78,column:8},end:{line:79,column:74}},"49":{start:{line:81,column:22},end:{line:81,column:61}},"50":{start:{line:82,column:8},end:{line:82,column:26}},"51":{start:{line:84,column:8},end:{line:84,column:35}},"52":{start:{line:85,column:8},end:{line:85,column:46}},"53":{start:{line:90,column:0},end:{line:111,column:2}},"54":{start:{line:91,column:4},end:{line:110,column:5}},"55":{start:{line:93,column:38},end:{line:93,column:46}},"56":{start:{line:95,column:21},end:{line:95,column:94}},"57":{start:{line:96,column:8},end:{line:98,column:9}},"58":{start:{line:97,column:12},end:{line:97,column:75}},"59":{start:{line:100,column:30},end:{line:100,column:88}},"60":{start:{line:101,column:8},end:{line:103,column:9}},"61":{start:{line:102,column:12},end:{line:102,column:75}},"62":{start:{line:105,column:22},end:{line:105,column:58}},"63":{start:{line:106,column:8},end:{line:106,column:26}},"64":{start:{line:108,column:8},end:{line:108,column:35}},"65":{start:{line:109,column:8},end:{line:109,column:46}},"66":{start:{line:113,column:0},end:{line:134,column:2}},"67":{start:{line:114,column:4},end:{line:133,column:5}},"68":{start:{line:116,column:38},end:{line:116,column:46}},"69":{start:{line:118,column:21},end:{line:118,column:94}},"70":{start:{line:119,column:8},end:{line:121,column:9}},"71":{start:{line:120,column:12},end:{line:120,column:75}},"72":{start:{line:123,column:30},end:{line:123,column:88}},"73":{start:{line:124,column:8},end:{line:126,column:9}},"74":{start:{line:125,column:12},end:{line:125,column:75}},"75":{start:{line:128,column:22},end:{line:128,column:58}},"76":{start:{line:129,column:8},end:{line:129,column:26}},"77":{start:{line:131,column:8},end:{line:131,column:35}},"78":{start:{line:132,column:8},end:{line:132,column:46}},"79":{start:{line:136,column:0},end:{line:157,column:2}},"80":{start:{line:137,column:4},end:{line:156,column:5}},"81":{start:{line:139,column:38},end:{line:139,column:46}},"82":{start:{line:141,column:21},end:{line:141,column:94}},"83":{start:{line:142,column:8},end:{line:144,column:9}},"84":{start:{line:143,column:12},end:{line:143,column:75}},"85":{start:{line:146,column:30},end:{line:146,column:88}},"86":{start:{line:147,column:8},end:{line:149,column:9}},"87":{start:{line:148,column:12},end:{line:148,column:75}},"88":{start:{line:151,column:22},end:{line:151,column:58}},"89":{start:{line:152,column:8},end:{line:152,column:26}},"90":{start:{line:154,column:8},end:{line:154,column:35}},"91":{start:{line:155,column:8},end:{line:155,column:46}},"92":{start:{line:159,column:0},end:{line:166,column:2}},"93":{start:{line:160,column:4},end:{line:165,column:5}},"94":{start:{line:161,column:8},end:{line:161,column:23}},"95":{start:{line:163,column:8},end:{line:163,column:34}},"96":{start:{line:164,column:8},end:{line:164,column:45}},"97":{start:{line:169,column:0},end:{line:178,column:2}},"98":{start:{line:170,column:4},end:{line:177,column:5}},"99":{start:{line:171,column:24},end:{line:171,column:98}},"100":{start:{line:172,column:8},end:{line:174,column:10}},"101":{start:{line:176,column:8},end:{line:176,column:24}},"102":{start:{line:180,column:0},end:{line:188,column:2}},"103":{start:{line:181,column:4},end:{line:187,column:5}},"104":{start:{line:182,column:24},end:{line:182,column:63}},"105":{start:{line:183,column:8},end:{line:183,column:29}},"106":{start:{line:184,column:8},end:{line:184,column:42}},"107":{start:{line:186,column:8},end:{line:186,column:25}},"108":{start:{line:191,column:0},end:{line:201,column:3}},"109":{start:{line:192,column:4},end:{line:200,column:5}},"110":{start:{line:193,column:24},end:{line:194,column:115}},"111":{start:{line:195,column:8},end:{line:197,column:10}},"112":{start:{line:199,column:8},end:{line:199,column:24}},"113":{start:{line:203,column:0},end:{line:203,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:44},end:{line:10,column:45}},loc:{start:{line:10,column:63},end:{line:34,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:36,column:43},end:{line:36,column:44}},loc:{start:{line:36,column:62},end:{line:60,column:1}},line:36},"2":{name:"(anonymous_2)",decl:{start:{line:62,column:42},end:{line:62,column:43}},loc:{start:{line:62,column:61},end:{line:87,column:1}},line:62},"3":{name:"(anonymous_3)",decl:{start:{line:90,column:41},end:{line:90,column:42}},loc:{start:{line:90,column:61},end:{line:111,column:1}},line:90},"4":{name:"(anonymous_4)",decl:{start:{line:113,column:40},end:{line:113,column:41}},loc:{start:{line:113,column:60},end:{line:134,column:1}},line:113},"5":{name:"(anonymous_5)",decl:{start:{line:136,column:39},end:{line:136,column:40}},loc:{start:{line:136,column:59},end:{line:157,column:1}},line:136},"6":{name:"(anonymous_6)",decl:{start:{line:159,column:40},end:{line:159,column:41}},loc:{start:{line:159,column:60},end:{line:166,column:1}},line:159},"7":{name:"(anonymous_7)",decl:{start:{line:169,column:25},end:{line:169,column:26}},loc:{start:{line:169,column:37},end:{line:178,column:1}},line:169},"8":{name:"(anonymous_8)",decl:{start:{line:180,column:28},end:{line:180,column:29}},loc:{start:{line:180,column:48},end:{line:188,column:1}},line:180},"9":{name:"(anonymous_9)",decl:{start:{line:191,column:32},end:{line:191,column:33}},loc:{start:{line:191,column:52},end:{line:201,column:1}},line:191}},branchMap:{"0":{loc:{start:{line:16,column:8},end:{line:18,column:9}},type:"if",locations:[{start:{line:16,column:8},end:{line:18,column:9}},{start:{line:16,column:8},end:{line:18,column:9}}],line:16},"1":{loc:{start:{line:42,column:8},end:{line:44,column:9}},type:"if",locations:[{start:{line:42,column:8},end:{line:44,column:9}},{start:{line:42,column:8},end:{line:44,column:9}}],line:42},"2":{loc:{start:{line:68,column:8},end:{line:71,column:9}},type:"if",locations:[{start:{line:68,column:8},end:{line:71,column:9}},{start:{line:68,column:8},end:{line:71,column:9}}],line:68},"3":{loc:{start:{line:96,column:8},end:{line:98,column:9}},type:"if",locations:[{start:{line:96,column:8},end:{line:98,column:9}},{start:{line:96,column:8},end:{line:98,column:9}}],line:96},"4":{loc:{start:{line:101,column:8},end:{line:103,column:9}},type:"if",locations:[{start:{line:101,column:8},end:{line:103,column:9}},{start:{line:101,column:8},end:{line:103,column:9}}],line:101},"5":{loc:{start:{line:119,column:8},end:{line:121,column:9}},type:"if",locations:[{start:{line:119,column:8},end:{line:121,column:9}},{start:{line:119,column:8},end:{line:121,column:9}}],line:119},"6":{loc:{start:{line:124,column:8},end:{line:126,column:9}},type:"if",locations:[{start:{line:124,column:8},end:{line:126,column:9}},{start:{line:124,column:8},end:{line:126,column:9}}],line:124},"7":{loc:{start:{line:142,column:8},end:{line:144,column:9}},type:"if",locations:[{start:{line:142,column:8},end:{line:144,column:9}},{start:{line:142,column:8},end:{line:144,column:9}}],line:142},"8":{loc:{start:{line:147,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:147,column:8},end:{line:149,column:9}},{start:{line:147,column:8},end:{line:149,column:9}}],line:147}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cfb37cdf9f2e7bd4c7713faacf5a2fcd86118ac5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1iq474yc6v=function(){return actualCoverage;};}return actualCoverage;}cov_1iq474yc6v();const router=(cov_1iq474yc6v().s[0]++,require("express").Router());const db=(cov_1iq474yc6v().s[1]++,require("../Database/index.js"));const bcrypt=(cov_1iq474yc6v().s[2]++,require('bcrypt'));const jwtGenerator=(cov_1iq474yc6v().s[3]++,require("../utils/jwtGenerator"));const{Pool}=(cov_1iq474yc6v().s[4]++,require("pg"));const validInfo=(cov_1iq474yc6v().s[5]++,require("../middleware/validInfo"));const authorization=(cov_1iq474yc6v().s[6]++,require("../middleware/authorization"));// Registering
cov_1iq474yc6v().s[7]++;router.post("/register/breeder",validInfo,async(req,res)=>{cov_1iq474yc6v().f[0]++;// 1. destructure the req.body 
const{username,password,account_type,reg_email,reg_phone,cattery_name,organization,owner_name,city}=(cov_1iq474yc6v().s[8]++,req.body);cov_1iq474yc6v().s[9]++;try{// 2. check if user exists (by checking user email)
const user=(cov_1iq474yc6v().s[10]++,await db.query("SELECT * FROM account WHERE reg_email = $1",[reg_email]));cov_1iq474yc6v().s[11]++;if(user.rows.length!==0){cov_1iq474yc6v().b[0][0]++;cov_1iq474yc6v().s[12]++;return res.status(401).json("User already exists.");}else{cov_1iq474yc6v().b[0][1]++;}var newUser=(cov_1iq474yc6v().s[13]++,null);// 3. Bcrypt the user password
const saltRound=(cov_1iq474yc6v().s[14]++,10);const salt=(cov_1iq474yc6v().s[15]++,await bcrypt.genSalt(saltRound));const bcryptPassword=(cov_1iq474yc6v().s[16]++,await bcrypt.hash(password,salt));// 4. Enter the new  user inside the database
cov_1iq474yc6v().s[17]++;newUser=await db.query("INSERT INTO breeder (username, user_password, account_type, reg_email, reg_phone, cattery_name, organization, owner_name, city) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING *",[username,bcryptPassword,account_type,reg_email,reg_phone,req.body.cattery_name,req.body.organization,req.body.owner_name,req.body.city]);// 5. generate jwt token for secure transaction of info and signature
const token=(cov_1iq474yc6v().s[18]++,jwtGenerator(newUser.rows[0].reg_email));cov_1iq474yc6v().s[19]++;res.json({token});}catch(err){cov_1iq474yc6v().s[20]++;console.error(err.message);cov_1iq474yc6v().s[21]++;res.status(500).send("Server error.");}});cov_1iq474yc6v().s[22]++;router.post("/register/parent",validInfo,async(req,res)=>{cov_1iq474yc6v().f[1]++;// 1. destructure the req.body 
const{username,password,account_type,reg_email,reg_phone,preferred_name}=(cov_1iq474yc6v().s[23]++,req.body);cov_1iq474yc6v().s[24]++;try{// 2. check if user exists (by checking user email)
const user=(cov_1iq474yc6v().s[25]++,await db.query("SELECT * FROM account WHERE reg_email = $1",[reg_email]));cov_1iq474yc6v().s[26]++;if(user.rows.length!==0){cov_1iq474yc6v().b[1][0]++;cov_1iq474yc6v().s[27]++;return res.status(401).json("User already exists.");}else{cov_1iq474yc6v().b[1][1]++;}var newUser=(cov_1iq474yc6v().s[28]++,null);// 3. Bcrypt the user password
const saltRound=(cov_1iq474yc6v().s[29]++,10);const salt=(cov_1iq474yc6v().s[30]++,await bcrypt.genSalt(saltRound));const bcryptPassword=(cov_1iq474yc6v().s[31]++,await bcrypt.hash(password,salt));// 4. Enter the new  user inside the database
cov_1iq474yc6v().s[32]++;newUser=await db.query("INSERT INTO potential_parents (username, user_password, account_type, reg_email, reg_phone, preferred_name) VALUES ($1, $2, $3, $4, $5, $6) ",[username,bcryptPassword,account_type,reg_email,reg_phone,req.body.preferred_name]);// 5. generate jwt token for secure transaction of info and signature
const token=(cov_1iq474yc6v().s[33]++,jwtGenerator(newUser.rows[0].reg_email));cov_1iq474yc6v().s[34]++;res.json({token});}catch(err){cov_1iq474yc6v().s[35]++;console.error(err.message);cov_1iq474yc6v().s[36]++;res.status(500).send("Server error.");}});cov_1iq474yc6v().s[37]++;router.post("/register/admin",validInfo,async(req,res)=>{cov_1iq474yc6v().f[2]++;// 1. destructure the req.body 
const{username,password,account_type,reg_email,reg_phone}=(cov_1iq474yc6v().s[38]++,req.body);cov_1iq474yc6v().s[39]++;try{// 2. check if user exists (by checking user email)
const user=(cov_1iq474yc6v().s[40]++,await db.query("SELECT * FROM admini WHERE reg_email = $1",[reg_email]));cov_1iq474yc6v().s[41]++;if(user.rows.length!==0){cov_1iq474yc6v().b[2][0]++;cov_1iq474yc6v().s[42]++;console.log(user.rows[0]);cov_1iq474yc6v().s[43]++;return res.status(401).json("User already exists.");}else{cov_1iq474yc6v().b[2][1]++;}var newUser=(cov_1iq474yc6v().s[44]++,null);// 3. Bcrypt the user password
const saltRound=(cov_1iq474yc6v().s[45]++,10);const salt=(cov_1iq474yc6v().s[46]++,await bcrypt.genSalt(saltRound));const bcryptPassword=(cov_1iq474yc6v().s[47]++,await bcrypt.hash(password,salt));// 4. Enter the new  user inside the database
cov_1iq474yc6v().s[48]++;newUser=await db.query("INSERT INTO admini (username, user_password, account_type, reg_email, reg_phone) VALUES ($1, $2, $3, $4, $5) RETURNING *",[username,bcryptPassword,account_type,reg_email,reg_phone]);// 5. generate jwt token for secure transaction of info and signature
const token=(cov_1iq474yc6v().s[49]++,jwtGenerator(newUser.rows[0].reg_email));cov_1iq474yc6v().s[50]++;res.json({token});}catch(err){cov_1iq474yc6v().s[51]++;console.error(err.message);cov_1iq474yc6v().s[52]++;res.status(500).send("Server error.");}});// Login
cov_1iq474yc6v().s[53]++;router.post("/login/breeder",validInfo,async(req,res)=>{cov_1iq474yc6v().f[3]++;cov_1iq474yc6v().s[54]++;try{// 1. destructure the req.body
const{reg_email,password}=(cov_1iq474yc6v().s[55]++,req.body);// 2. check if user doesn't exist (if not then we throw error)
const user=(cov_1iq474yc6v().s[56]++,await db.query("SELECT * FROM account WHERE reg_email = $1",[reg_email]));cov_1iq474yc6v().s[57]++;if(user.rows.length===0){cov_1iq474yc6v().b[3][0]++;cov_1iq474yc6v().s[58]++;return res.status(401).json("Password or email is incorrect.");}else{cov_1iq474yc6v().b[3][1]++;}// 3. check if incoming password is the same as the database password
const validPassword=(cov_1iq474yc6v().s[59]++,await bcrypt.compare(password,user.rows[0].user_password));cov_1iq474yc6v().s[60]++;if(!validPassword){cov_1iq474yc6v().b[4][0]++;cov_1iq474yc6v().s[61]++;return res.status(401).json("Password or email is incorrect.");}else{cov_1iq474yc6v().b[4][1]++;}// 4. given them a jwt token
const token=(cov_1iq474yc6v().s[62]++,jwtGenerator(user.rows[0].reg_email));cov_1iq474yc6v().s[63]++;res.json({token});}catch(err){cov_1iq474yc6v().s[64]++;console.error(err.message);cov_1iq474yc6v().s[65]++;res.status(500).send("Server error.");}});cov_1iq474yc6v().s[66]++;router.post("/login/parent",validInfo,async(req,res)=>{cov_1iq474yc6v().f[4]++;cov_1iq474yc6v().s[67]++;try{// 1. destructure the req.body
const{reg_email,password}=(cov_1iq474yc6v().s[68]++,req.body);// 2. check if user doesn't exist (if not then we throw error)
const user=(cov_1iq474yc6v().s[69]++,await db.query("SELECT * FROM account WHERE reg_email = $1",[reg_email]));cov_1iq474yc6v().s[70]++;if(user.rows.length===0){cov_1iq474yc6v().b[5][0]++;cov_1iq474yc6v().s[71]++;return res.status(401).json("Password or email is incorrect.");}else{cov_1iq474yc6v().b[5][1]++;}// 3. check if incoming password is the same as the database password
const validPassword=(cov_1iq474yc6v().s[72]++,await bcrypt.compare(password,user.rows[0].user_password));cov_1iq474yc6v().s[73]++;if(!validPassword){cov_1iq474yc6v().b[6][0]++;cov_1iq474yc6v().s[74]++;return res.status(401).json("Password or email is incorrect.");}else{cov_1iq474yc6v().b[6][1]++;}// 4. given them a jwt token
const token=(cov_1iq474yc6v().s[75]++,jwtGenerator(user.rows[0].reg_email));cov_1iq474yc6v().s[76]++;res.json({token});}catch(err){cov_1iq474yc6v().s[77]++;console.error(err.message);cov_1iq474yc6v().s[78]++;res.status(500).send("Server error.");}});cov_1iq474yc6v().s[79]++;router.post("/login/admin",validInfo,async(req,res)=>{cov_1iq474yc6v().f[5]++;cov_1iq474yc6v().s[80]++;try{// 1. destructure the req.body
const{reg_email,password}=(cov_1iq474yc6v().s[81]++,req.body);// 2. check if user doesn't exist (if not then we throw error)
const user=(cov_1iq474yc6v().s[82]++,await db.query("SELECT * FROM account WHERE reg_email = $1",[reg_email]));cov_1iq474yc6v().s[83]++;if(user.rows.length===0){cov_1iq474yc6v().b[7][0]++;cov_1iq474yc6v().s[84]++;return res.status(401).json("Password or email is incorrect.");}else{cov_1iq474yc6v().b[7][1]++;}// 3. check if incoming password is the same as the database password
const validPassword=(cov_1iq474yc6v().s[85]++,await bcrypt.compare(password,user.rows[0].user_password));cov_1iq474yc6v().s[86]++;if(!validPassword){cov_1iq474yc6v().b[8][0]++;cov_1iq474yc6v().s[87]++;return res.status(401).json("Password or email is incorrect.");}else{cov_1iq474yc6v().b[8][1]++;}// 4. given them a jwt token
const token=(cov_1iq474yc6v().s[88]++,jwtGenerator(user.rows[0].reg_email));cov_1iq474yc6v().s[89]++;res.json({token});}catch(err){cov_1iq474yc6v().s[90]++;console.error(err.message);cov_1iq474yc6v().s[91]++;res.status(500).send("Server error.");}});cov_1iq474yc6v().s[92]++;router.get("/is-verify",authorization,async(req,res)=>{cov_1iq474yc6v().f[6]++;cov_1iq474yc6v().s[93]++;try{cov_1iq474yc6v().s[94]++;res.json(true);}catch(err){cov_1iq474yc6v().s[95]++;console.error(err.message);cov_1iq474yc6v().s[96]++;res.status(500).send("Server error.");}});// delete a user (for administrator only)
cov_1iq474yc6v().s[97]++;router.delete("/delete",(req,res)=>{cov_1iq474yc6v().f[7]++;cov_1iq474yc6v().s[98]++;try{const results=(cov_1iq474yc6v().s[99]++,db.query("DELETE FROM account where reg_email = $1",[req.body.reg_email]));cov_1iq474yc6v().s[100]++;res.status(204).json({status:"success"});}catch(err){cov_1iq474yc6v().s[101]++;console.log(err);}});cov_1iq474yc6v().s[102]++;router.get("/all_accounts",async(req,res)=>{cov_1iq474yc6v().f[8]++;cov_1iq474yc6v().s[103]++;try{const results=(cov_1iq474yc6v().s[104]++,await db.query("SELECT * FROM account"));cov_1iq474yc6v().s[105]++;console.log(results);cov_1iq474yc6v().s[106]++;res.status(200).send(results.rows);}catch(err){cov_1iq474yc6v().s[107]++;console.log(err);}});// update an account
cov_1iq474yc6v().s[108]++;router.patch("/update_account",async(req,res)=>{cov_1iq474yc6v().f[9]++;cov_1iq474yc6v().s[109]++;try{const results=(cov_1iq474yc6v().s[110]++,await db.query("UPDATE account SET username = $1, user_password=$2, account_type = $3, reg_phone = $4 WHERE reg_email = $5",[req.body.username,req.body.user_password,req.body.account_type,req.body.reg_phone,req.body.reg_email]));cov_1iq474yc6v().s[111]++;res.status(200).json({status:"success"});}catch(err){cov_1iq474yc6v().s[112]++;console.log(err);}});cov_1iq474yc6v().s[113]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uX2JyZWVkZXIuanMiXSwibmFtZXMiOlsicm91dGVyIiwicmVxdWlyZSIsIlJvdXRlciIsImRiIiwiYmNyeXB0Iiwiand0R2VuZXJhdG9yIiwiUG9vbCIsInZhbGlkSW5mbyIsImF1dGhvcml6YXRpb24iLCJwb3N0IiwicmVxIiwicmVzIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImFjY291bnRfdHlwZSIsInJlZ19lbWFpbCIsInJlZ19waG9uZSIsImNhdHRlcnlfbmFtZSIsIm9yZ2FuaXphdGlvbiIsIm93bmVyX25hbWUiLCJjaXR5IiwiYm9keSIsInVzZXIiLCJxdWVyeSIsInJvd3MiLCJsZW5ndGgiLCJzdGF0dXMiLCJqc29uIiwibmV3VXNlciIsInNhbHRSb3VuZCIsInNhbHQiLCJnZW5TYWx0IiwiYmNyeXB0UGFzc3dvcmQiLCJoYXNoIiwidG9rZW4iLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJtZXNzYWdlIiwic2VuZCIsInByZWZlcnJlZF9uYW1lIiwibG9nIiwidmFsaWRQYXNzd29yZCIsImNvbXBhcmUiLCJ1c2VyX3Bhc3N3b3JkIiwiZ2V0IiwiZGVsZXRlIiwicmVzdWx0cyIsInBhdGNoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6InNsV0FlWTsyRkFmWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFQLENBQW1CQyxNQUFuQixFQUFILENBQVosQ0FDQSxLQUFNQyxDQUFBQSxFQUFFLDBCQUFHRixPQUFPLENBQUMsc0JBQUQsQ0FBVixDQUFSLENBQ0EsS0FBTUcsQ0FBQUEsTUFBTSwwQkFBR0gsT0FBTyxDQUFDLFFBQUQsQ0FBVixDQUFaLENBQ0EsS0FBTUksQ0FBQUEsWUFBWSwwQkFBR0osT0FBTyxDQUFDLHVCQUFELENBQVYsQ0FBbEIsQ0FDQSxLQUFNLENBQUVLLElBQUYsMkJBQVdMLE9BQU8sQ0FBQyxJQUFELENBQWxCLENBQU4sQ0FDQSxLQUFNTSxDQUFBQSxTQUFT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Q0FBdUZOLEdBQUcsQ0FBQ1csSUFBSixDQUFTTixTQUFoRyxDQURzQixDQUFULENBQWIsQ0FERCwwQkFHQ0osR0FBRyxDQUFDZSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FDakJELE1BQU0sQ0FBRSxTQURTLENBQXJCLEVBR0gsT0FBTVMsR0FBTixDQUFVLDJCQUNQQyxPQUFPLENBQUNLLEdBQVIsQ0FBWU4sR0FBWixFQUNILENBQ0osQ0FWRCxFLDBCQVlBYyxNQUFNLENBQUNDLE9BQVAsQ0FBaUJsRCxNQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJvdXRlciA9IHJlcXVpcmUoXCJleHByZXNzXCIpLlJvdXRlcigpO1xuY29uc3QgZGIgPSByZXF1aXJlKFwiLi4vRGF0YWJhc2UvaW5kZXguanNcIik7XG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKTtcbmNvbnN0IGp3dEdlbmVyYXRvciA9IHJlcXVpcmUoXCIuLi91dGlscy9qd3RHZW5lcmF0b3JcIik7XG5jb25zdCB7IFBvb2wgfSA9IHJlcXVpcmUoXCJwZ1wiKTtcbmNvbnN0IHZhbGlkSW5mbyA9IHJlcXVpcmUoXCIuLi9taWRkbGV3YXJlL3ZhbGlkSW5mb1wiKTtcbmNvbnN0IGF1dGhvcml6YXRpb24gPSByZXF1aXJlKFwiLi4vbWlkZGxld2FyZS9hdXRob3JpemF0aW9uXCIpXG5cbi8vIFJlZ2lzdGVyaW5nXG5yb3V0ZXIucG9zdChcIi9yZWdpc3Rlci9icmVlZGVyXCIsIHZhbGlkSW5mbywgYXN5bmMocmVxLCByZXMpID0+IHtcbiAgICAvLyAxLiBkZXN0cnVjdHVyZSB0aGUgcmVxLmJvZHkgXG4gICAgY29uc3R7dXNlcm5hbWUsIHBhc3N3b3JkLCBhY2NvdW50X3R5cGUsIHJlZ19lbWFpbCwgcmVnX3Bob25lLCBjYXR0ZXJ5X25hbWUsIG9yZ2FuaXphdGlvbiwgb3duZXJfbmFtZSwgY2l0eX0gPSByZXEuYm9keTtcbiAgICB0cnkge1xuICAgICAgICAvLyAyLiBjaGVjayBpZiB1c2VyIGV4aXN0cyAoYnkgY2hlY2tpbmcgdXNlciBlbWFpbClcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLnF1ZXJ5KFwiU0VMRUNUICogRlJPTSBhY2NvdW50IFdIRVJFIHJlZ19lbWFpbCA9ICQxXCIsIFtyZWdfZW1haWxdKTtcbiAgICAgICAgaWYodXNlci5yb3dzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKFwiVXNlciBhbHJlYWR5IGV4aXN0cy5cIilcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3VXNlciA9IG51bGw7XG4gICAgICAgIC8vIDMuIEJjcnlwdCB0aGUgdXNlciBwYXNzd29yZFxuICAgICAgICBjb25zdCBzYWx0Um91bmQgPSAxMDtcbiAgICAgICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KHNhbHRSb3VuZCk7XG4gICAgICAgIGNvbnN0IGJjcnlwdFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQpXG4gICAgICAgIC8vIDQuIEVudGVyIHRoZSBuZXcgIHVzZXIgaW5zaWRlIHRoZSBkYXRhYmFzZVxuICAgICAgICBuZXdVc2VyID0gYXdhaXQgZGIucXVlcnkoXCJJTlNFUlQgSU5UTyBicmVlZGVyICh1c2VybmFtZSwgdXNlcl9wYXNzd29yZCwgYWNjb3VudF90eXBlLCByZWdfZW1haWwsIHJlZ19waG9uZSwgY2F0dGVyeV9uYW1lLCBvcmdhbml6YXRpb24sIG93bmVyX25hbWUsIGNpdHkpIFZBTFVFUyAoJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4LCAkOSkgUkVUVVJOSU5HICpcIlxuICAgICAgICAsIFt1c2VybmFtZSwgYmNyeXB0UGFzc3dvcmQsIGFjY291bnRfdHlwZSwgcmVnX2VtYWlsLCByZWdfcGhvbmUsIHJlcS5ib2R5LmNhdHRlcnlfbmFtZSwgcmVxLmJvZHkub3JnYW5pemF0aW9uLCByZXEuYm9keS5vd25lcl9uYW1lLCByZXEuYm9keS5jaXR5XSk7XG4gICAgICAgIC8vIDUuIGdlbmVyYXRlIGp3dCB0b2tlbiBmb3Igc2VjdXJlIHRyYW5zYWN0aW9uIG9mIGluZm8gYW5kIHNpZ25hdHVyZVxuICAgICAgICBjb25zdCB0b2tlbiA9IGp3dEdlbmVyYXRvcihuZXdVc2VyLnJvd3NbMF0ucmVnX2VtYWlsKTtcbiAgICAgICAgcmVzLmpzb24oe3Rva2VufSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIlNlcnZlciBlcnJvci5cIik7XG4gICAgfVxufSk7XG5cbnJvdXRlci5wb3N0KFwiL3JlZ2lzdGVyL3BhcmVudFwiLCB2YWxpZEluZm8sIGFzeW5jKHJlcSwgcmVzKSA9PiB7XG4gICAgLy8gMS4gZGVzdHJ1Y3R1cmUgdGhlIHJlcS5ib2R5IFxuICAgIGNvbnN0e3VzZXJuYW1lLCBwYXNzd29yZCwgYWNjb3VudF90eXBlLCByZWdfZW1haWwsIHJlZ19waG9uZSwgcHJlZmVycmVkX25hbWV9ID0gcmVxLmJvZHk7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gMi4gY2hlY2sgaWYgdXNlciBleGlzdHMgKGJ5IGNoZWNraW5nIHVzZXIgZW1haWwpXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5xdWVyeShcIlNFTEVDVCAqIEZST00gYWNjb3VudCBXSEVSRSByZWdfZW1haWwgPSAkMVwiLCBbcmVnX2VtYWlsXSk7XG4gICAgICAgIGlmKHVzZXIucm93cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbihcIlVzZXIgYWxyZWFkeSBleGlzdHMuXCIpXG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5ld1VzZXIgPSBudWxsO1xuICAgICAgICAvLyAzLiBCY3J5cHQgdGhlIHVzZXIgcGFzc3dvcmRcbiAgICAgICAgY29uc3Qgc2FsdFJvdW5kID0gMTA7XG4gICAgICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdChzYWx0Um91bmQpO1xuICAgICAgICBjb25zdCBiY3J5cHRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0KVxuICAgICAgICAvLyA0LiBFbnRlciB0aGUgbmV3ICB1c2VyIGluc2lkZSB0aGUgZGF0YWJhc2VcbiAgICAgICAgbmV3VXNlciA9IGF3YWl0IGRiLnF1ZXJ5KFwiSU5TRVJUIElOVE8gcG90ZW50aWFsX3BhcmVudHMgKHVzZXJuYW1lLCB1c2VyX3Bhc3N3b3JkLCBhY2NvdW50X3R5cGUsIHJlZ19lbWFpbCwgcmVnX3Bob25lLCBwcmVmZXJyZWRfbmFtZSkgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUsICQ2KSBcIlxuICAgICAgICAsIFt1c2VybmFtZSwgYmNyeXB0UGFzc3dvcmQsIGFjY291bnRfdHlwZSwgcmVnX2VtYWlsLCByZWdfcGhvbmUsIHJlcS5ib2R5LnByZWZlcnJlZF9uYW1lXSk7XG4gICAgICAgIC8vIDUuIGdlbmVyYXRlIGp3dCB0b2tlbiBmb3Igc2VjdXJlIHRyYW5zYWN0aW9uIG9mIGluZm8gYW5kIHNpZ25hdHVyZVxuICAgICAgICBjb25zdCB0b2tlbiA9IGp3dEdlbmVyYXRvcihuZXdVc2VyLnJvd3NbMF0ucmVnX2VtYWlsKTtcbiAgICAgICAgcmVzLmpzb24oe3Rva2VufSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIlNlcnZlciBlcnJvci5cIik7XG4gICAgfVxufSk7XG5cbnJvdXRlci5wb3N0KFwiL3JlZ2lzdGVyL2FkbWluXCIsIHZhbGlkSW5mbywgYXN5bmMocmVxLCByZXMpID0+IHtcbiAgICAvLyAxLiBkZXN0cnVjdHVyZSB0aGUgcmVxLmJvZHkgXG4gICAgY29uc3R7dXNlcm5hbWUsIHBhc3N3b3JkLCBhY2NvdW50X3R5cGUsIHJlZ19lbWFpbCwgcmVnX3Bob25lfSA9IHJlcS5ib2R5O1xuICAgIHRyeSB7XG4gICAgICAgIC8vIDIuIGNoZWNrIGlmIHVzZXIgZXhpc3RzIChieSBjaGVja2luZyB1c2VyIGVtYWlsKVxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIucXVlcnkoXCJTRUxFQ1QgKiBGUk9NIGFkbWluaSBXSEVSRSByZWdfZW1haWwgPSAkMVwiLCBbcmVnX2VtYWlsXSk7XG4gICAgICAgIGlmKHVzZXIucm93cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXIucm93c1swXSlcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbihcIlVzZXIgYWxyZWFkeSBleGlzdHMuXCIpXG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5ld1VzZXIgPSBudWxsO1xuICAgICAgICAvLyAzLiBCY3J5cHQgdGhlIHVzZXIgcGFzc3dvcmRcbiAgICAgICAgY29uc3Qgc2FsdFJvdW5kID0gMTA7XG4gICAgICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdChzYWx0Um91bmQpO1xuICAgICAgICBjb25zdCBiY3J5cHRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0KVxuICAgICAgICAvLyA0LiBFbnRlciB0aGUgbmV3ICB1c2VyIGluc2lkZSB0aGUgZGF0YWJhc2VcbiAgICAgICAgbmV3VXNlciA9IGF3YWl0IGRiLnF1ZXJ5KFwiSU5TRVJUIElOVE8gYWRtaW5pICh1c2VybmFtZSwgdXNlcl9wYXNzd29yZCwgYWNjb3VudF90eXBlLCByZWdfZW1haWwsIHJlZ19waG9uZSkgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUpIFJFVFVSTklORyAqXCJcbiAgICAgICAgLCBbdXNlcm5hbWUsIGJjcnlwdFBhc3N3b3JkLCBhY2NvdW50X3R5cGUsIHJlZ19lbWFpbCwgcmVnX3Bob25lXSk7XG4gICAgICAgIC8vIDUuIGdlbmVyYXRlIGp3dCB0b2tlbiBmb3Igc2VjdXJlIHRyYW5zYWN0aW9uIG9mIGluZm8gYW5kIHNpZ25hdHVyZVxuICAgICAgICBjb25zdCB0b2tlbiA9IGp3dEdlbmVyYXRvcihuZXdVc2VyLnJvd3NbMF0ucmVnX2VtYWlsKTtcbiAgICAgICAgcmVzLmpzb24oe3Rva2VufSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIlNlcnZlciBlcnJvci5cIik7XG4gICAgfVxufSk7XG5cbi8vIExvZ2luXG5yb3V0ZXIucG9zdChcIi9sb2dpbi9icmVlZGVyXCIsIHZhbGlkSW5mbywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5e1xuICAgICAgICAvLyAxLiBkZXN0cnVjdHVyZSB0aGUgcmVxLmJvZHlcbiAgICAgICAgY29uc3Qge3JlZ19lbWFpbCwgcGFzc3dvcmR9ID0gcmVxLmJvZHk7XG4gICAgICAgIC8vIDIuIGNoZWNrIGlmIHVzZXIgZG9lc24ndCBleGlzdCAoaWYgbm90IHRoZW4gd2UgdGhyb3cgZXJyb3IpXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5xdWVyeShcIlNFTEVDVCAqIEZST00gYWNjb3VudCBXSEVSRSByZWdfZW1haWwgPSAkMVwiLCBbcmVnX2VtYWlsXSk7XG4gICAgICAgIGlmKHVzZXIucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbihcIlBhc3N3b3JkIG9yIGVtYWlsIGlzIGluY29ycmVjdC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMy4gY2hlY2sgaWYgaW5jb21pbmcgcGFzc3dvcmQgaXMgdGhlIHNhbWUgYXMgdGhlIGRhdGFiYXNlIHBhc3N3b3JkXG4gICAgICAgIGNvbnN0IHZhbGlkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5yb3dzWzBdLnVzZXJfcGFzc3dvcmQpXG4gICAgICAgIGlmKCF2YWxpZFBhc3N3b3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oXCJQYXNzd29yZCBvciBlbWFpbCBpcyBpbmNvcnJlY3QuXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDQuIGdpdmVuIHRoZW0gYSBqd3QgdG9rZW5cbiAgICAgICAgY29uc3QgdG9rZW4gPSBqd3RHZW5lcmF0b3IodXNlci5yb3dzWzBdLnJlZ19lbWFpbCk7XG4gICAgICAgIHJlcy5qc29uKHt0b2tlbn0pO1xuICAgIH1jYXRjaChlcnIpe1xuICAgICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJTZXJ2ZXIgZXJyb3IuXCIpO1xuICAgIH1cbn0pXG5cbnJvdXRlci5wb3N0KFwiL2xvZ2luL3BhcmVudFwiLCB2YWxpZEluZm8sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeXtcbiAgICAgICAgLy8gMS4gZGVzdHJ1Y3R1cmUgdGhlIHJlcS5ib2R5XG4gICAgICAgIGNvbnN0IHtyZWdfZW1haWwsIHBhc3N3b3JkfSA9IHJlcS5ib2R5O1xuICAgICAgICAvLyAyLiBjaGVjayBpZiB1c2VyIGRvZXNuJ3QgZXhpc3QgKGlmIG5vdCB0aGVuIHdlIHRocm93IGVycm9yKVxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIucXVlcnkoXCJTRUxFQ1QgKiBGUk9NIGFjY291bnQgV0hFUkUgcmVnX2VtYWlsID0gJDFcIiwgW3JlZ19lbWFpbF0pO1xuICAgICAgICBpZih1c2VyLnJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oXCJQYXNzd29yZCBvciBlbWFpbCBpcyBpbmNvcnJlY3QuXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMuIGNoZWNrIGlmIGluY29taW5nIHBhc3N3b3JkIGlzIHRoZSBzYW1lIGFzIHRoZSBkYXRhYmFzZSBwYXNzd29yZFxuICAgICAgICBjb25zdCB2YWxpZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucm93c1swXS51c2VyX3Bhc3N3b3JkKVxuICAgICAgICBpZighdmFsaWRQYXNzd29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKFwiUGFzc3dvcmQgb3IgZW1haWwgaXMgaW5jb3JyZWN0LlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyA0LiBnaXZlbiB0aGVtIGEgand0IHRva2VuXG4gICAgICAgIGNvbnN0IHRva2VuID0gand0R2VuZXJhdG9yKHVzZXIucm93c1swXS5yZWdfZW1haWwpO1xuICAgICAgICByZXMuanNvbih7dG9rZW59KTtcbiAgICB9Y2F0Y2goZXJyKXtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiU2VydmVyIGVycm9yLlwiKTtcbiAgICB9XG59KVxuXG5yb3V0ZXIucG9zdChcIi9sb2dpbi9hZG1pblwiLCB2YWxpZEluZm8sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeXtcbiAgICAgICAgLy8gMS4gZGVzdHJ1Y3R1cmUgdGhlIHJlcS5ib2R5XG4gICAgICAgIGNvbnN0IHtyZWdfZW1haWwsIHBhc3N3b3JkfSA9IHJlcS5ib2R5O1xuICAgICAgICAvLyAyLiBjaGVjayBpZiB1c2VyIGRvZXNuJ3QgZXhpc3QgKGlmIG5vdCB0aGVuIHdlIHRocm93IGVycm9yKVxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIucXVlcnkoXCJTRUxFQ1QgKiBGUk9NIGFjY291bnQgV0hFUkUgcmVnX2VtYWlsID0gJDFcIiwgW3JlZ19lbWFpbF0pO1xuICAgICAgICBpZih1c2VyLnJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oXCJQYXNzd29yZCBvciBlbWFpbCBpcyBpbmNvcnJlY3QuXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMuIGNoZWNrIGlmIGluY29taW5nIHBhc3N3b3JkIGlzIHRoZSBzYW1lIGFzIHRoZSBkYXRhYmFzZSBwYXNzd29yZFxuICAgICAgICBjb25zdCB2YWxpZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucm93c1swXS51c2VyX3Bhc3N3b3JkKVxuICAgICAgICBpZighdmFsaWRQYXNzd29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKFwiUGFzc3dvcmQgb3IgZW1haWwgaXMgaW5jb3JyZWN0LlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyA0LiBnaXZlbiB0aGVtIGEgand0IHRva2VuXG4gICAgICAgIGNvbnN0IHRva2VuID0gand0R2VuZXJhdG9yKHVzZXIucm93c1swXS5yZWdfZW1haWwpO1xuICAgICAgICByZXMuanNvbih7dG9rZW59KTtcbiAgICB9Y2F0Y2goZXJyKXtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiU2VydmVyIGVycm9yLlwiKTtcbiAgICB9XG59KVxuXG5yb3V0ZXIuZ2V0KFwiL2lzLXZlcmlmeVwiLCBhdXRob3JpemF0aW9uLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICByZXMuanNvbih0cnVlKTtcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKVxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIlNlcnZlciBlcnJvci5cIilcbiAgICB9XG59KVxuXG4vLyBkZWxldGUgYSB1c2VyIChmb3IgYWRtaW5pc3RyYXRvciBvbmx5KVxucm91dGVyLmRlbGV0ZShcIi9kZWxldGVcIiwgKHJlcSwgcmVzKT0+e1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBkYi5xdWVyeShcIkRFTEVURSBGUk9NIGFjY291bnQgd2hlcmUgcmVnX2VtYWlsID0gJDFcIiwgW3JlcS5ib2R5LnJlZ19lbWFpbF0pXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5qc29uKHtcbiAgICAgICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCJcbiAgICAgICAgfSlcbiAgICB9IGNhdGNoKGVycil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICB9XG59KVxuXG5yb3V0ZXIuZ2V0KFwiL2FsbF9hY2NvdW50c1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnl7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBkYi5xdWVyeShcIlNFTEVDVCAqIEZST00gYWNjb3VudFwiKTtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0cyk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHJlc3VsdHMucm93cylcbiAgICB9IGNhdGNoKGVycil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfVxufSlcblxuLy8gdXBkYXRlIGFuIGFjY291bnRcbnJvdXRlci5wYXRjaChcIi91cGRhdGVfYWNjb3VudFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnl7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBkYi5xdWVyeShcIlVQREFURSBhY2NvdW50IFNFVCB1c2VybmFtZSA9ICQxLCB1c2VyX3Bhc3N3b3JkPSQyLCBhY2NvdW50X3R5cGUgPSAkMywgcmVnX3Bob25lID0gJDQgV0hFUkUgcmVnX2VtYWlsID0gJDVcIixcbiAgICAgICAgW3JlcS5ib2R5LnVzZXJuYW1lLCByZXEuYm9keS51c2VyX3Bhc3N3b3JkLCByZXEuYm9keS5hY2NvdW50X3R5cGUsIHJlcS5ib2R5LnJlZ19waG9uZSwgcmVxLmJvZHkucmVnX2VtYWlsXSlcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIlxuICAgICAgICB9KVxuICAgIH1jYXRjaChlcnIpe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuIl19