function cov_2a60b59fel(){var path="/Users/ningjia/Desktop/CSDS393/server/middleware/validInfo.js";var hash="591098eeee62d1a9b5fb20dd0c3a48913b40ba0f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/ningjia/Desktop/CSDS393/server/middleware/validInfo.js",statementMap:{"0":{start:{line:1,column:0},end:{line:25,column:4}},"1":{start:{line:2,column:117},end:{line:2,column:125}},"2":{start:{line:5,column:6},end:{line:5,column:77}},"3":{start:{line:8,column:4},end:{line:22,column:5}},"4":{start:{line:11,column:6},end:{line:15,column:7}},"5":{start:{line:12,column:8},end:{line:12,column:60}},"6":{start:{line:13,column:13},end:{line:15,column:7}},"7":{start:{line:14,column:8},end:{line:14,column:54}},"8":{start:{line:16,column:11},end:{line:22,column:5}},"9":{start:{line:17,column:6},end:{line:21,column:7}},"10":{start:{line:18,column:8},end:{line:18,column:60}},"11":{start:{line:19,column:13},end:{line:21,column:7}},"12":{start:{line:20,column:8},end:{line:20,column:54}},"13":{start:{line:24,column:4},end:{line:24,column:11}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:1,column:17},end:{line:1,column:18}},loc:{start:{line:1,column:37},end:{line:25,column:3}},line:1},"1":{name:"validEmail",decl:{start:{line:4,column:13},end:{line:4,column:23}},loc:{start:{line:4,column:35},end:{line:6,column:5}},line:4}},branchMap:{"0":{loc:{start:{line:8,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:22,column:5}},{start:{line:8,column:4},end:{line:22,column:5}}],line:8},"1":{loc:{start:{line:11,column:6},end:{line:15,column:7}},type:"if",locations:[{start:{line:11,column:6},end:{line:15,column:7}},{start:{line:11,column:6},end:{line:15,column:7}}],line:11},"2":{loc:{start:{line:13,column:13},end:{line:15,column:7}},type:"if",locations:[{start:{line:13,column:13},end:{line:15,column:7}},{start:{line:13,column:13},end:{line:15,column:7}}],line:13},"3":{loc:{start:{line:16,column:11},end:{line:22,column:5}},type:"if",locations:[{start:{line:16,column:11},end:{line:22,column:5}},{start:{line:16,column:11},end:{line:22,column:5}}],line:16},"4":{loc:{start:{line:17,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:17,column:6},end:{line:21,column:7}},{start:{line:17,column:6},end:{line:21,column:7}}],line:17},"5":{loc:{start:{line:19,column:13},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:13},end:{line:21,column:7}},{start:{line:19,column:13},end:{line:21,column:7}}],line:19}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"591098eeee62d1a9b5fb20dd0c3a48913b40ba0f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2a60b59fel=function(){return actualCoverage;};}return actualCoverage;}cov_2a60b59fel();cov_2a60b59fel().s[0]++;module.exports=(req,res,next)=>{cov_2a60b59fel().f[0]++;const{username,password,account_type,reg_email,reg_phone,cattery_name,organization,owner_name,city}=(cov_2a60b59fel().s[1]++,req.body);// check the format of email address
function validEmail(userEmail){cov_2a60b59fel().f[1]++;cov_2a60b59fel().s[2]++;return /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(userEmail);}cov_2a60b59fel().s[3]++;if(req.path==="/register/breeder"){cov_2a60b59fel().b[0][0]++;cov_2a60b59fel().s[4]++;//console.log(reg_email, username, password, account_type, reg_phone)
// check whether all required fields are filled
if(![reg_email,username,password,account_type,reg_phone,cattery_name,organization,owner_name,city].every(Boolean)){cov_2a60b59fel().b[1][0]++;cov_2a60b59fel().s[5]++;return res.status(401).json("Missing credentials.");}else{cov_2a60b59fel().b[1][1]++;cov_2a60b59fel().s[6]++;if(!validEmail(reg_email)){cov_2a60b59fel().b[2][0]++;cov_2a60b59fel().s[7]++;return res.status(401).json("Invalid Email.");}else{cov_2a60b59fel().b[2][1]++;}}}else{cov_2a60b59fel().b[0][1]++;cov_2a60b59fel().s[8]++;if(req.path==="/login/breeder"){cov_2a60b59fel().b[3][0]++;cov_2a60b59fel().s[9]++;if(![reg_email,password].every(Boolean)){cov_2a60b59fel().b[4][0]++;cov_2a60b59fel().s[10]++;return res.status(401).json("Missing Credentials.");}else{cov_2a60b59fel().b[4][1]++;cov_2a60b59fel().s[11]++;if(!validEmail(reg_email)){cov_2a60b59fel().b[5][0]++;cov_2a60b59fel().s[12]++;return res.status(401).json("Invalid Email.");}else{cov_2a60b59fel().b[5][1]++;}}}else{cov_2a60b59fel().b[3][1]++;}}// continue on the route
cov_2a60b59fel().s[13]++;next();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkSW5mby5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicmVxIiwicmVzIiwibmV4dCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJhY2NvdW50X3R5cGUiLCJyZWdfZW1haWwiLCJyZWdfcGhvbmUiLCJjYXR0ZXJ5X25hbWUiLCJvcmdhbml6YXRpb24iLCJvd25lcl9uYW1lIiwiY2l0eSIsImJvZHkiLCJ2YWxpZEVtYWlsIiwidXNlckVtYWlsIiwidGVzdCIsInBhdGgiLCJldmVyeSIsIkJvb2xlYW4iLCJzdGF0dXMiLCJqc29uIl0sIm1hcHBpbmdzIjoiczVGQWVZO21IQWZaQSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FBQ0MsR0FBRCxDQUFNQyxHQUFOLENBQVdDLElBQVgsR0FBb0IseUJBQ2pDLEtBQU0sQ0FBRUMsUUFBRixDQUFZQyxRQUFaLENBQXNCQyxZQUF0QixDQUFvQ0MsU0FBcEMsQ0FBK0NDLFNBQS9DLENBQTBEQyxZQUExRCxDQUF3RUMsWUFBeEUsQ0FBc0ZDLFVBQXRGLENBQWtHQyxJQUFsRywyQkFBMkdYLEdBQUcsQ0FBQ1ksSUFBL0csQ0FBTixDQUNBO0FBQ0EsUUFBU0MsQ0FBQUEsVUFBVCxDQUFvQkMsU0FBcEIsQ0FBK0IsaURBQzdCLE1BQU8saURBQWdEQyxJQUFoRCxDQUFxREQsU0FBckQsQ0FBUCxDQUNELENBTGdDLHdCQU9qQyxHQUFJZCxHQUFHLENBQUNnQixJQUFKLEdBQWEsbUJBQWpCLENBQXNDLG9EQUNwQztBQUNBO0FBQ0EsR0FBSSxDQUFDLENBQUNWLFNBQUQsQ0FBWUgsUUFBWixDQUFzQkMsUUFBdEIsQ0FBZ0NDLFlBQWhDLENBQThDRSxTQUE5QyxDQUF5REMsWUFBekQsQ0FBdUVDLFlBQXZFLENBQXFGQyxVQUFyRixDQUFpR0MsSUFBakcsRUFBdUdNLEtBQXZHLENBQTZHQyxPQUE3RyxDQUFMLENBQTRILG9EQUMxSCxNQUFPakIsQ0FBQUEsR0FBRyxDQUFDa0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLHNCQUFyQixDQUFQLENBQ0QsQ0FGRCxJQUVPLHVEQUFJLENBQUNQLFVBQVUsQ0FBQ1AsU0FBRCxDQUFmLENBQTRCLG9EQUNqQyxNQUFPTCxDQUFBQSxHQUFHLENBQUNrQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsZ0JBQXJCLENBQVAsQ0FDRCxDQUZNLGlDQUVOLENBQ0YsQ0FSRCxJQVFPLHVEQUFJcEIsR0FBRyxDQUFDZ0IsSUFBSixHQUFhLGdCQUFqQixDQUFtQyxvREFDeEMsR0FBSSxDQUFDLENBQUNWLFNBQUQsQ0FBWUYsUUFBWixFQUFzQmEsS0FBdEIsQ0FBNEJDLE9BQTVCLENBQUwsQ0FBMkMscURBQ3pDLE1BQU9qQixDQUFBQSxHQUFHLENBQUNrQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsc0JBQXJCLENBQVAsQ0FDRCxDQUZELElBRU8sd0RBQUksQ0FBQ1AsVUFBVSxDQUFDUCxTQUFELENBQWYsQ0FBNEIscURBQ2pDLE1BQU9MLENBQUFBLEdBQUcsQ0FBQ2tCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixnQkFBckIsQ0FBUCxDQUNELENBRk0saUNBRU4sQ0FDRixDQU5NLGlDQU1OLENBQ0Q7QUF0QmlDLHlCQXVCakNsQixJQUFJLEdBQ0wsQ0F4QkgiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkLCBhY2NvdW50X3R5cGUsIHJlZ19lbWFpbCwgcmVnX3Bob25lLCBjYXR0ZXJ5X25hbWUsIG9yZ2FuaXphdGlvbiwgb3duZXJfbmFtZSwgY2l0eSB9ID0gcmVxLmJvZHk7XG4gICAgLy8gY2hlY2sgdGhlIGZvcm1hdCBvZiBlbWFpbCBhZGRyZXNzXG4gICAgZnVuY3Rpb24gdmFsaWRFbWFpbCh1c2VyRW1haWwpIHtcbiAgICAgIHJldHVybiAvXlxcdysoW1xcLi1dP1xcdyspKkBcXHcrKFtcXC4tXT9cXHcrKSooXFwuXFx3ezIsM30pKyQvLnRlc3QodXNlckVtYWlsKTtcbiAgICB9XG4gIFxuICAgIGlmIChyZXEucGF0aCA9PT0gXCIvcmVnaXN0ZXIvYnJlZWRlclwiKSB7XG4gICAgICAvL2NvbnNvbGUubG9nKHJlZ19lbWFpbCwgdXNlcm5hbWUsIHBhc3N3b3JkLCBhY2NvdW50X3R5cGUsIHJlZ19waG9uZSlcbiAgICAgIC8vIGNoZWNrIHdoZXRoZXIgYWxsIHJlcXVpcmVkIGZpZWxkcyBhcmUgZmlsbGVkXG4gICAgICBpZiAoIVtyZWdfZW1haWwsIHVzZXJuYW1lLCBwYXNzd29yZCwgYWNjb3VudF90eXBlLCByZWdfcGhvbmUsIGNhdHRlcnlfbmFtZSwgb3JnYW5pemF0aW9uLCBvd25lcl9uYW1lLCBjaXR5XS5ldmVyeShCb29sZWFuKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oXCJNaXNzaW5nIGNyZWRlbnRpYWxzLlwiKTtcbiAgICAgIH0gZWxzZSBpZiAoIXZhbGlkRW1haWwocmVnX2VtYWlsKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oXCJJbnZhbGlkIEVtYWlsLlwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlcS5wYXRoID09PSBcIi9sb2dpbi9icmVlZGVyXCIpIHtcbiAgICAgIGlmICghW3JlZ19lbWFpbCwgcGFzc3dvcmRdLmV2ZXJ5KEJvb2xlYW4pKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbihcIk1pc3NpbmcgQ3JlZGVudGlhbHMuXCIpO1xuICAgICAgfSBlbHNlIGlmICghdmFsaWRFbWFpbChyZWdfZW1haWwpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbihcIkludmFsaWQgRW1haWwuXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBjb250aW51ZSBvbiB0aGUgcm91dGVcbiAgICBuZXh0KCk7XG4gIH07Il19